# Advent of Code 2025

- https://adventofcode.com/
- https://github.com/livexia/advent-of-code-2025

## Day 1

ä»Šå¤©çš„é—®é¢˜ç®—æ˜¯è½»æ¾ï¼Œè¾“å…¥çš„æ¯ä¸€è¡Œå†³å®šæ—‹é’®çš„è½¬å‘å’Œæ—‹è½¬çš„è·ç¦»ï¼Œè¾“å…¥çš„å¤„ç†ä¹Ÿä¸å¤æ‚ï¼Œä½†æ˜¯è¦æ³¨æ„åœ¨è§£ææ•°å­—æ—¶çš„é”™è¯¯å¤„ç†ï¼Œè¾“å…¥å¤„ç†å®Œæˆåï¼Œå¦‚æœæ—‹é’®æ˜¯å‘å·¦æ—‹è½¬åˆ™è·ç¦»ä¸ºè´Ÿæ•°ï¼Œå‘å³åˆ™ä¸ºæ­£æ•°ã€‚

ç¬¬ä¸€éƒ¨åˆ†åªéœ€è¦è®¡ç®—æ—‹è½¬ä¹‹åçš„åˆ»åº¦ä½ç½®æ˜¯å¦ä¸º 0 å³å¯ï¼Œå¯ä»¥ç®€å•çš„æ±‚ 100 çš„ä½™æ•°å³å¯ã€‚

ç¬¬äºŒéƒ¨åˆ†ç¨å¾®å¤æ‚ä¸€äº›ï¼Œéœ€è¦è®¡ç®—æ¯æ¬¡æ—‹è½¬è¿‡ç¨‹ä¸­ç»è¿‡äº†å¤šå°‘æ¬¡ 0 åˆ»åº¦ä½ç½®ï¼Œç»™å‡ºçš„æµ‹è¯•ç”¨ä¾‹è¾ƒå°ï¼Œå®é™…çš„è¾“å…¥æ—‹è½¬çš„è·ç¦»å¯èƒ½æ˜¯å¤šåœˆçš„ï¼Œè¦è€ƒè™‘åˆ°è¿™ä¸€ç‚¹ã€‚é¦–å…ˆè®¡ç®—æ¯ä¸€æ¬¡æ—‹è½¬çš„è·ç¦»è‡³å°‘æœ‰å¤šå°‘åœˆï¼Œæ¯è½¬ä¸€åœˆå¯†ç åŠ ä¸€ã€‚æ¥ç€è®¡ç®—æ•´åœˆä¹‹å¤–çš„æ—‹è½¬è·ç¦»ï¼Œå¦‚æœèµ·å§‹ç‚¹ä¸åœ¨ 0 ï¼Œé‚£ä¹ˆæ—‹è½¬ç»“æŸåï¼Œå¦‚æœåˆ»åº¦è·¨è¿‡ 0 åˆ»åº¦ï¼Œå¯†ç åŠ ä¸€ã€‚å› ä¸ºå‘å·¦æ—‹è½¬è·ç¦»æ˜¯è´Ÿæ•°ï¼Œå¦‚æœå½“å‰ä½ç½®ä¸ä¸º 0 ï¼ŒåŒæ—¶å½“å‰ä½ç½®åŠ ä¸Šæ—‹è½¬è·ç¦»ä¸ºè´Ÿæ•°ï¼Œåˆ™æ—‹é’®æŒ‡é’ˆä¸€å®šå‘å·¦è·¨è¿‡ä¸€æ¬¡ 0 ã€‚åŒç†å¦‚æœå½“å‰ä½ç½®ä¸ä¸º 0 ï¼ˆä¸ä¸º 100ï¼‰ï¼ŒåŒæ—¶å‘å³æ—‹è½¬ï¼Œè€Œæ—‹è½¬åçš„åˆ»åº¦æ•°è¶…è¿‡ 100 ï¼Œé‚£ä¹ˆæŒ‡é’ˆä¸€å®šå‘å³æ—‹è½¬è¿‡ä¸€æ¬¡ 0ã€‚æ ¹æ®è¿™ä¸ªé€»è¾‘å¯¹ password è¿›è¡ŒåŠ ä¸€å³å¯ã€‚

ç¬¬äºŒéƒ¨åˆ†ä»£ç 

```rust
fn part2(rotations: &[i32]) -> Result<u32> {
    let _start = Instant::now();

    let mut dial = 50;
    let mut password = 0;

    for rot in rotations {
        // è®¡ç®—ä¸€å®šä¼šç»è¿‡ 0 åˆ»åº¦çš„æ•´åœˆæ¬¡æ•°
        password += rot.unsigned_abs() / 100;

        // æ‰£é™¤æ•´åœˆçš„æ—‹è½¬è·ç¦»ï¼Œ
        // å¯ä»¥è§„é¿ä¾‹å¦‚ä» 0 åˆ»åº¦æ—‹è½¬è·ç¦» 100 çš„è¾¹ç•Œæƒ…å†µ
        let rot = rot % 100;

        let temp = dial + rot;
        // å½“èµ·ç‚¹ä¸æ˜¯ 0 åˆ»åº¦æ—¶ï¼Œ
        // å‘å·¦æˆ–å‘å³æ—‹è½¬è¶…è¿‡æˆ–ä½äºåˆ»åº¦è¾¹ç•Œ 0 æˆ– 100 æ—¶ï¼Œ
        // ä¸€å®šç»è¿‡ä¸€æ¬¡ 0 åˆ»åº¦
        password += (dial != 0 && (temp >= 100 || temp <= 0)) as u32;

        // è®¡ç®—æ—‹è½¬ååˆ»åº¦çš„çœŸå®ä½ç½®ï¼Œåˆ»åº¦å€¼ä¸€å®šå¤§äº 0
        dial = temp.rem_euclid(100);
    }

    println!("part2: {password}");
    println!("> Time elapsed is: {:?}", _start.elapsed());
    Ok(password)
}
```

## Day 2

ä»Šå¤©è¦æ±‚æ‰¾å‡ºåŒºé—´å†…å­˜åœ¨é‡å¤æ¨¡å¼çš„æ•°å­—ï¼Œç¬¬ä¸€éƒ¨åˆ†è¦æ±‚æ‰¾å‡ºå·¦å³ä¸¤ä¸ªéƒ¨åˆ†ç›¸åŒçš„æ•°å­—ï¼Œç¬¬äºŒéƒ¨åˆ†è¦æ±‚æ‰¾å‡ºæ•°å­—ç»è¿‡ N ç­‰åˆ†åï¼Œæ¯ä¸ªéƒ¨åˆ†éƒ½ç›¸åŒçš„æ•°å­—ã€‚ç¬¬äºŒéƒ¨åˆ†å…¶å®æ˜¯ç¬¬ä¸€éƒ¨åˆ†çš„è¡ç”Ÿï¼Œè§£é¢˜æ€è·¯åœ¨ä¸¤ä¸ªéƒ¨åˆ†æ˜¯ä¸€è‡´çš„ã€‚æˆ‘é¦–å…ˆåˆ©ç”¨æš´åŠ›æ³•å¾—å‡ºé¢˜è§£ï¼Œé€šè¿‡å–ä½™çš„æ–¹æ³•ä¸æ–­çš„åˆ†å‰²æ•°å­—ï¼Œå¯¹æ¯”åˆ†å‰²çš„ç»“æœï¼Œå³å¯ç¡®å®šæ˜¯å¦å­˜åœ¨é‡å¤æ¨¡å¼ã€‚æš´åŠ›æ³•æ•ˆç‡ä¸é«˜ï¼Œå› ä¸ºæˆ‘éå†äº†åŒºé—´å†…çš„æ‰€æœ‰æ•°å­—ï¼Œä¾æ¬¡æ£€æŸ¥æ•°å­—ï¼Œè¿™æ ·å®é™…æ•ˆç‡å¾ˆæ…¢ã€‚

### æ¸è¿›å¯»æ‰¾

æš´åŠ›æ³•ä¸­åŒºé—´å†…çš„æ•°å­—æ˜¯ä¾æ¬¡é€’å¢çš„ï¼Œä½†æ˜¯åº”è¯¥æœ‰æ›´åŠ é«˜æ•ˆçš„æ–¹æ³•ç¡®å®šç¬¦åˆé‡å¤æ¨¡å¼çš„æ•°å­—ã€‚è€ƒè™‘åŒºé—´ 565653-565659 ï¼Œå¯è§è¿™ä¸ªåŒºé—´ä¸­æ‰€æœ‰çš„æ•°å­—éƒ½æ˜¯ 6 ä½ç­‰é•¿çš„ï¼Œæˆ‘ä»¬å…ˆè€ƒè™‘ç¬¬ä¸€éƒ¨åˆ†çš„é‡å¤æ¨¡å¼ï¼Œå³æ•°å­—çš„å‰åŠéƒ¨åˆ†å’ŒååŠéƒ¨åˆ†åº”å½“ç›¸åŒã€‚è€ƒè™‘åŒºé—´èµ·ç‚¹ 565653 ï¼Œç›´æ¥å°†åŒºé—´æŒ‰ç…§é‡å¤æ¨¡å¼è¿›è¡Œåˆ†å‰²ï¼Œå¯å¾—åˆ°ä¸¤ä¸ªæ•°å­— 565 å’Œ 653 ï¼ŒåŒæ ·çš„å°†ç»“å°¾ä¹Ÿè¿›è¡Œåˆ†å‰²å¾—åˆ° 565 å’Œ 659 ï¼Œå¯è§ä¸¤ä¸ªæ•°å­—çš„å‰åŠéƒ¨åˆ†ç›¸åŒï¼Œé‚£ä¹ˆè¿™ä¸ªéƒ¨åˆ†å°±ä¸èƒ½å˜åŠ¨ï¼Œé‚£ä¹ˆ 653 å’Œ 659 å°±åº”è¯¥å˜åŒ–ä¸º 565 ï¼Œå¾—åˆ°çš„æ•°å­—æ˜¯ 565565 ä¸åœ¨åŒºé—´å†…ã€‚æ‰€ä»¥æŒ‰ç…§ç¬¬ä¸€éƒ¨åˆ†çš„åŒ¹é…æ¨¡å¼ï¼Œæ— æ³•ä»åŒºé—´å†…å¯»æ‰¾åˆ°ç¬¦åˆçš„æ•°å­—ã€‚é‚£ä¹ˆè€ƒè™‘ç¬¬äºŒéƒ¨åˆ†çš„åŒ¹é…æ¨¡å¼ï¼Œè¿™ä¸ªåŒºé—´çš„æ•°å­—é•¿åº¦éƒ½ä¸º 6 ï¼Œé‚£ä¹ˆå­˜åœ¨é•¿åº¦ä¸º 1ã€2 å’Œ 3 çš„ä¸‰ç§åˆ†å‰²æ¨¡å¼ã€‚ç¡®å®šåŒºé—´èµ·ç‚¹å’Œç»“å°¾æ•°å­—ä¸­ï¼Œå…±åŒçš„éƒ¨åˆ†ä¸º 56565ï¼Œé‚£ä¹ˆæ ¹æ®è¿™ä¸ªå…±åŒéƒ¨åˆ†è¿›è¡Œåˆ†å‰²ï¼Œå¯ä»¥å‘ç°é•¿åº¦ 1 æˆ– 3 çš„åˆ†å‰²æ¨¡å¼æ˜¯ä¸å¯èƒ½çš„ã€‚è€ƒè™‘åˆ†å‰²é•¿åº¦ä¸º 2 ï¼Œé‚£ä¹ˆåˆ†å‰²åæ¯ä¸ªéƒ¨åˆ†éƒ½éœ€è¦æ˜¯ 56 æ‰è¡Œï¼ŒåŒæ—¶ 56 åˆšå¥½è½å…¥èµ·ç‚¹å’Œç»“å°¾ 53 - 59 ä¹‹é—´ï¼Œé‚£ä¹ˆé•¿åº¦ä¸º 2 çš„åˆ†å‰²å¯è¡Œã€‚

è¿™ä¸ªæ–¹æ³•å­˜åœ¨ä¸€ç§æƒ…å†µï¼Œé‚£å°±æ˜¯å¦‚æœåŒºé—´çš„æ•°å­—é•¿åº¦ä¸ä¸€è‡´ï¼Œæ¯”å¦‚åŒºé—´ 95-115 å°±ä¸å®¹æ˜“å¯»æ‰¾äº†ï¼Œå½“ç„¶å¯ä»¥æŠŠåŒºé—´è¿›è¡Œæ‹†åˆ†ï¼Œ95-115 å˜æˆ 95-99 å’Œ 100-115 ä¸¤ä¸ªåŒºé—´ï¼Œåˆ†å¼€å¯»æ‰¾å³å¯ã€‚

**æ•ˆç‡å¯¹æ¯”**

```
part1: 26255179562
> Time elapsed is: 22.953333ms
part2: 31680313976
> Time elapsed is: 37.9495ms
part1 by step: 26255179562
> Time elapsed is: 58.208Âµs
part2 by step: 31680313976
> Time elapsed is: 70.834Âµs
```

æ¸è¿›æŸ¥æ‰¾ä¸»è¦ä»£ç 
```rust
fn split_range(start: usize, end: usize) -> Vec<(usize, usize)> {
    let (start_l, end_l) = (start.ilog10(), end.ilog10());
    if start_l < end_l {
        let mut ranges = vec![];
        let mut start = start;
        for i in start_l..=end_l {
            let new_end = 10usize.pow(i + 1) - 1;
            ranges.push((start, new_end.min(end)));
            start = new_end + 1;
        }
        ranges
    } else {
        vec![(start, end)]
    }
}

fn find_invalid(start: usize, end: usize, base: u32) -> Vec<usize> {
    assert_eq!(start.ilog10(), end.ilog10());
    let l = start.ilog10() + 1;
    if !l.is_multiple_of(base) {
        return vec![];
    }
    let (start_left, end_left) = (start / 10usize.pow(l - base), end / 10usize.pow(l - base));
    let mut invalids = Vec::new();
    for s in start_left..=end_left {
        let n = (0..l)
            .step_by(base as usize)
            .fold(0, |n, i| n + s * 10usize.pow(i));
        if start <= n && n <= end {
            invalids.push(n);
        }
    }
    invalids
}
```

## Day 3

ä»Šå¤©è¦æ±‚è®¡ç®—ä¸€ä¸ªæ•°å­—åºåˆ—çš„æœ€å¤§å­ä¸²ï¼ˆæ•°å­—ï¼‰ï¼Œç¬¬ä¸€éƒ¨åˆ†é™å®šå­ä¸²é•¿åº¦ä¸º2ï¼Œç¬¬äºŒéƒ¨åˆ†åˆ™é™å®šé•¿åº¦ä¸º12ï¼ŒåŒæ—¶å­ä¸²çš„é¡ºåºä¸å˜ã€‚è¾“å…¥çš„å¤„ç†ä¸å¤æ‚ï¼Œæ€è·¯ä¹Ÿå¾ˆç®€å•ï¼Œå°±æ˜¯éå†æ•°å­—åºåˆ—ï¼Œä¾æ¬¡å¯»æ‰¾æœ€å¤§å€¼å³å¯ã€‚

è€ƒè™‘æ•°å­—åºåˆ— 96781 ï¼Œéœ€è¦å¯»æ‰¾é•¿åº¦ä¸º 2 çš„æœ€å¤§å­ä¸²ï¼Œå‡è®¾å­ä¸²ä¸º ab ï¼Œé‚£ä¹ˆä¼˜å…ˆä»ç»™å®šåºåˆ—ä¸­ç¡®å®šæœ€å¤§çš„ a ï¼ŒåŒæ—¶ç¡®ä¿èƒ½æ‰¾åˆ° b å³å¯ã€‚æœç´¢ a æ—¶ä»å·¦åˆ°å³è¿›è¡Œæœç´¢ï¼Œè€Œæœç´¢åˆ°æœ€åä¸€ä¸ªæ•°å­—ä¹‹å‰å°±éœ€è¦åœæ­¢ï¼Œä¹Ÿå°±æ˜¯æœç´¢ 9678 å³å¯ã€‚åœ¨æœç´¢ a çš„è¿‡ç¨‹ä¸­ä¸å¿…è€ƒè™‘æ˜¯å¦å¯èƒ½ä¼šå¯¼è‡´ b çš„å€¼ä¸æ˜¯æœ€å¤§ï¼Œå› ä¸ºæœ€åçš„è¦æ±‚çš„æ˜¯ ab æœ€å¤§å³å¯ã€‚å‡è®¾æœç´¢è¿‡ç¨‹ä¸­ä¸ºäº†ç¡®ä¿ b çš„å€¼ä¸ºæœ€å¤§çš„ d ï¼Œè€Œå¯¼è‡´ a å–å¾—äº†è¾ƒå°çš„å€¼ cï¼Œå³ c < a ä¸” d > b ï¼Œé‚£ä¹ˆ 10 * c + d ä¸€å®šå°äº 10 * a + b ã€‚

ä¸¤ä¸ªéƒ¨åˆ†å¯¹äºå­ä¸²çš„é•¿åº¦è¦æ±‚ä¸åŒï¼Œä½†æ˜¯æ€è·¯æ˜¯ä¸€è‡´çš„ã€‚ä»å·¦åˆ°å³ä¾æ¬¡æœç´¢å­—ä¸²æœ€å¤§å€¼çš„è¿‡ç¨‹ä¸­ï¼Œéœ€è¦è®°å½•ç¬¬ä¸€æ¬¡é‡åˆ°æœ€å¤§å€¼çš„å…ƒç´ ä½ç½®ï¼Œè€Œéå…¶ä»–å¯èƒ½é‡åˆ°æœ€å¤§å€¼çš„ä½ç½®ï¼Œè¿™æ ·å¯ä»¥é¿å…å½±å“åç»­å…ƒç´ æœ€å¤§å€¼æœç´¢ã€‚å‚è€ƒåºåˆ— 98975ï¼Œéœ€è¦å¯»æ‰¾é•¿åº¦ä¸º 2 çš„æœ€å¤§å­ä¸²ï¼Œa ç¡®å®šæœç´¢åˆ°çš„æœ€å¤§å€¼ä¸º 9ï¼Œå¦‚æœ a è®°å½•çš„æœ€å¤§å€¼ä½ç½®ä¸ä¸º 0 è€Œä¸º 2 ï¼Œé‚£ä¹ˆæœç´¢ b æ—¶å°±ä¼šä»ä½ç½® 3 å¼€å§‹æœç´¢ï¼Œæœ€åå¾—åˆ°å­ä¸²ä¸º 97 ï¼Œæ˜¯é”™è¯¯ç»“æœã€‚

è´ªå¿ƒç®—æ³•æ ¸å¿ƒä»£ç 

```rust
fn find_largest_joltage(battery: &[usize], number: usize) -> usize {
    let length = battery.len();
    let mut joltage = 0;
    let mut next_battery = 0;
    for l in (0..number).rev() {
        let mut max_battery = 0;
        (next_battery..(length - l)).for_each(|left| {
            if battery[left] > max_battery {
                max_battery = battery[left];
                next_battery = left + 1;
            }
        });
        joltage = joltage * 10 + max_battery;
    }
    joltage
}
```

è¿™ä¸ªç®—æ³•è¿˜å¯ä»¥è¿›è¡Œå‰ªæï¼Œå› ä¸ºè¾“å…¥çš„æ•°å­—åºåˆ—é™åˆ¶ï¼Œå®é™…ä¸Šå¦‚æœæœç´¢åˆ°æœ€å¤§æ•°å­—ä¸º 9 å°±ä¸éœ€è¦ç»§ç»­æœç´¢äº†ï¼Œè¿™å¯ä»¥è¿›è¡Œä¸€å®šçš„å‰ªæï¼Œä½†æ˜¯æˆ‘çš„å®ç°ç”¨äº† for_each å°±å…·ä½“å®ç°äº†ã€‚

çœ‹åˆ°ä¸€ä¸ªåŸºæœ¬æ€è·¯ä¸€è‡´ï¼Œä½†æ˜¯å®ç°ä¸Šä¸åŒçš„æ–¹æ³• [ropewalker](https://www.reddit.com/r/adventofcode/comments/1pcvaj4/comment/ns0smcw) [code](https://github.com/ropewalker/advent_of_code_2025/blob/master/src/day03.rs) ï¼Œé€šè¿‡æ»‘åŠ¨é™å®šé•¿åº¦çª—å£ï¼Œä¾æ¬¡å–å¾—æœ€å¤§å€¼ï¼Œå®ç°ä¸åŒä½†ç®—æ³•æ˜¯ä¸€æ ·çš„ï¼Œæ•ˆç‡åº”è¯¥ä¹Ÿæ²¡æœ‰å·®åˆ«ã€‚

ç›®å‰æˆ‘çš„å®ç°åœ¨æŸ¥æ‰¾è¿‡ç¨‹ä¸­å®é™…ä¸Šå­˜åœ¨å¤§é‡çš„æµªè´¹ï¼Œå› ä¸ºå¿…é¡»è¦æ¯”è¾ƒåˆ°æœ€åæ‰èƒ½ç¡®å®šæœ€å¤§å€¼ï¼Œè€Œæ¯æ¬¡æŸ¥æ‰¾æœ€å¤§å€¼æ—¶éƒ½è¿›è¡Œäº†ä¸€æ¬¡ã€‚ç¤¾åŒºä¸Šä¹Ÿæœ‰äººä½¿ç”¨ DP è¿›è¡Œä¼˜åŒ–è¿™ä¸ªè¿‡ç¨‹ï¼Œå³åœ¨ä¸€æ¬¡æ¯”è¾ƒä¸­ä¸æ–­è®°å½•å½“å‰ä½ç½®åˆ°æœ«å°¾å¤„çš„æœ€å¤§å€¼ï¼Œå…·ä½“æˆ‘å°±ä¸å®ç°äº†ï¼Œåšä¸€ä¸‹åˆ†æã€‚

é˜…è¯»ç¤¾åŒºä¸Šä»–äººçš„åŠ¨æ€è§„åˆ’ä»£ç  [michel-kraemer](https://github.com/michel-kraemer/adventofcode-rust/blob/main/2025/day03/src/main.rs)ï¼Œè¿™ä¸ªå®ç°ä½¿ç”¨çš„æ˜¯è‡ªåº•å‘ä¸Šçš„åŠ¨æ€è§„åˆ’ï¼Œè¿‡ç¨‹ä¸­æ•°ç»„ dp è®°å½•çš„æ˜¯ï¼Œé•¿åº¦ä¸º len çš„å­ä¸²ä» i å¼€å§‹çš„æœ€å¤§å­ä¸²ï¼Œè½¬ç§»æ–¹ç¨‹æ˜¯ dp[len][i] = max(number[i]*mul + dp[len - 1][i + 1])ï¼Œdp ä»é•¿åº¦ 1 ä»¥åŠä»æ•°å­—åºåˆ—æœ€åå¼€å§‹è®¡ç®—ã€‚

å‚è€ƒæ ¸å¿ƒä»£ç 

```rust
fn dp_find_largest_joltage(battery: &[usize], number: usize) -> usize {
    let length = battery.len();
    let mut dp = vec![vec![0; length + 1]; number + 1];
    let mut mul = 1;
    for len in 1..=number {
        let mut max = 0;
        for (i, &b) in battery.iter().enumerate().take(length - len + 1).rev() {
            max = max.max(b * mul + dp[len - 1][i + 1]);
            dp[len][i] = max;
        }
        mul *= 10;
    }
    dp[number][0]
}
```

ç†è®ºä¸Š dp åº”è¯¥è¦èƒ½å‡å°‘æ¯”è¾ƒçš„æ¬¡æ•°ï¼Œä½†æ˜¯è¿™ä¸ªå®ç°å®é™…çš„è¿è¡Œæ•ˆç‡è¿œä¸å¦‚æˆ‘çš„æš´åŠ›æ³•ï¼Œå¯¹æ¯”æ ¸å¿ƒä»£ç å®é™…å¯ä»¥å‘ç°æ¯”è¾ƒçš„æ¬¡æ•°å¹¶æ²¡æœ‰å‡å°‘ï¼Œè™½ç„¶è¿è¡Œæ—¶éƒ½æ˜¯ O(Nk)ï¼ŒNæ˜¯åºåˆ—é•¿åº¦ï¼Œkæ˜¯å­ä¸²é•¿åº¦ï¼Œä½†æ˜¯å¢åŠ äº†æ•°ç»„æ“ä½œï¼Œæ•´ä½“åè€Œå¢åŠ äº†è®¡ç®—æˆæœ¬ã€‚æ¯”è¾ƒæ¬¡æ•°æ²¡æœ‰å‡å°‘ï¼Œæ˜¯å› ä¸ºæ¯æ¬¡è®¡ç®— dp æ—¶ï¼Œä¾æ—§éœ€è¦ä»åˆå§‹ä½ç½®å¼€å§‹æ¯”å¯¹åˆ°å½“å‰çš„ç»“å°¾ä½ç½®ï¼Œå†—ä½™çš„æ¯”è¾ƒä¾æ—§å­˜åœ¨ã€‚

åŠ¨æ€è§„åˆ’ç®—æ³•çš„æ ¸å¿ƒ

- dp[len][i]=ä» battery[i..] ä¸­é€‰æ‹© len ä¸ªæ•°å­—ï¼Œä¿æŒç›¸å¯¹é¡ºåºä¸²è”å¾—åˆ°çš„æœ€å¤§å€¼ã€‚
- è¾¹ç•Œæ¡ä»¶ï¼ˆå·²åˆå§‹åŒ–ï¼‰ï¼šdp[0][i]=0ï¼šä»ä»»ä½•ä½ç½®å¼€å§‹é€‰æ‹© 0 ä¸ªæ•°å­—ï¼Œç»“æœéƒ½æ˜¯ 0ã€‚
- å¤–éƒ¨å¾ªç¯ï¼šæŒ‰é•¿åº¦ (len) è¿­ä»£ `for len in 1..=number` è¿™ä¸ªå¾ªç¯æ˜¯æŒ‰æ„å»ºæ•°å­—çš„ä½æ•°ä»å°åˆ°å¤§è¿›è¡Œè®¡ç®—ã€‚DP ç®—æ³•çš„å…³é”®æ˜¯åˆ©ç”¨å°è§„æ¨¡å­é—®é¢˜çš„è§£æ¥æ¨å¯¼å¤§è§„æ¨¡é—®é¢˜çš„è§£ã€‚åœ¨è¿™é‡Œï¼Œè¦è®¡ç®— dp[len][i]ï¼Œæˆ‘ä»¬å¿…é¡»å…ˆçŸ¥é“ dp[lenâˆ’1][j] çš„å€¼ã€‚
- å†…éƒ¨å¾ªç¯ï¼šæŒ‰èµ·å§‹ç´¢å¼• (i) è¿­ä»£ `for (i, &b) in battery.iter().enumerate().take(length - len + 1).rev()`
- ä¼˜åŒ–åŸç†ï¼šå½“æˆ‘ä»¬åœ¨è®¡ç®— dp[len][i] æ—¶ï¼Œæˆ‘ä»¬åœ¨è€ƒè™‘ä» battery[i..] ä¸­é€‰æ‹© len ä¸ªæ•°å­—ã€‚æœ‰ä¸¤ç§æƒ…å†µï¼š
    - é€‰æ‹© battery[i] ä½œä¸ºç¬¬ä¸€ä¸ªæ•°å­—ï¼š å¾—åˆ°çš„æ•°å­—æ˜¯ battery[i]â‹…mul+dp[lenâˆ’1][i+1]ã€‚
    - ä¸é€‰æ‹© battery[i] ä½œä¸ºç¬¬ä¸€ä¸ªæ•°å­—ï¼š è¿™æ„å‘³ç€ç¬¬ä¸€ä¸ªæ•°å­—æ˜¯ä» battery[i+1..] ä¸­é€‰çš„ï¼Œæ‰€ä»¥è¿™ç­‰ä»·äº dp[len][i+1]ã€‚

å½“å‰è§£å†³çš„è¿™ä¸ªç‰¹å®šé—®é¢˜ï¼Œè´ªå¿ƒç®—æ³•åœ¨è¿è¡Œæ•ˆç‡ï¼ˆå¸¸æ•°æ—¶é—´å’Œç©ºé—´ï¼‰ä¸Šæ˜¯æ›´ä¼˜çš„é€‰æ‹©ã€‚ä½†åœ¨ç®—æ³•è®¾è®¡çš„æ™®é€‚æ€§ä¸Šï¼ŒDP ç®—æ³•åˆ™æ›´ä¸ºå¼ºå¤§ã€‚

## Day 04

ä»Šå¤©çš„é—®é¢˜ç®€æ´æ˜äº†ï¼Œè¾“å…¥æ˜¯äºŒç»´çš„çŸ©é˜µï¼Œå…¶ä¸­æ¯ä¸ªä½ç½®ä¸Šå¯èƒ½å­˜åœ¨ä¸€å·çº¸ï¼Œå¦‚æœä¸€ä¸ªå·çº¸çš„å…«ä¸ªé‚»æ¥ä½ç½®ä¸Šåªæœ‰å°äºä¸‰ä¸ªä½ç½®ä¸Šæ˜¯å·çº¸æ—¶ï¼Œå‰è½¦å¯ä»¥å°†å·çº¸ç§»é™¤ã€‚ç¬¬ä¸€éƒ¨åˆ†æ˜¯ç§»é™¤ä¸€æ¬¡ï¼Œç¬¬äºŒéƒ¨åˆ†åˆ™æ˜¯åå¤è¿›è¡Œæ“ä½œï¼Œç›´åˆ°çŸ©é˜µä¸­æ‰€æœ‰çš„å·çº¸éƒ½æ— æ³•å†è¢«ç§»é™¤ã€‚é—®é¢˜çš„æ ¸å¿ƒå°±æ˜¯è®¡ç®—çŸ©é˜µä¸­æ¯ä¸ªå·çº¸é‚»æ¥å·çº¸çš„ä¸ªæ•°ï¼Œç„¶åæ ¹æ®éœ€æ±‚ä¿®æ”¹çŸ©é˜µçŠ¶æ€ã€‚

æœ€ç›´æ¥çš„æ€è·¯å°±æ˜¯åˆ©ç”¨äºŒä½æ•°ç»„ï¼Œç›´æ¥å°†è¾“å…¥çš„å­—ç¬¦ä¸²ï¼Œè½¬ä¸ºäºŒç»´å­—ç¬¦æ•°ç»„ï¼Œæ¥ç€éå†æ¯ä¸€ä¸ªä½ç½®ï¼Œè®¡ç®—å…«ä¸ªé‚»æ¥ä½ç½®ï¼Œåˆ¤æ–­å…¶ä¸­æ˜¯å·çº¸çš„æ•°é‡ã€‚ç¬¬äºŒéƒ¨åˆ†åˆ™éœ€è¦å¤šæ¬¡éå†ï¼Œæ¯æ¬¡éå†ä¸­éœ€è¦è®°å½•ç§»é™¤çš„å·çº¸åæ ‡ï¼Œå½“ä¸€æ¬¡éå†å®Œæˆåï¼Œæ ¹æ®è®°å½•çš„åæ ‡ä¿®æ”¹çŸ©é˜µï¼Œå°†å·çº¸ç§»é™¤ã€‚æ€è·¯ç®€å•æ˜äº†ï¼Œä¹Ÿå¾—åˆ°äº†æ­£ç¡®çš„ç­”æ¡ˆï¼Œä½†æ˜¯æˆ‘å¯¹è¿è¡Œæ•ˆç‡ä¸æ»¡æ„ï¼Œç¬¬ä¸€éƒ¨åˆ†è¿è¡Œæ—¶é—´æ˜¯ 22ms ï¼Œè€Œç¬¬äºŒéƒ¨åˆ†åˆ™æ˜¯ 273 msã€‚

ç¬¬ä¸€éƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(N) å…¶ä¸­ N æ˜¯çŸ©é˜µå¤§å°ï¼Œè€Œç¬¬äºŒéƒ¨åˆ†çš„æ—¶é—´å¤æ‚åº¦æ˜¯ O(kN) å…¶ä¸­ k æ—¶å¯èƒ½éœ€è¦çš„éå†ç§»é™¤æ¬¡æ•°ï¼Œk æœ€å¤§ä¸ºæœ€åˆçš„å·çº¸æ•°é‡ã€‚

äºŒç»´æ•°ç»„æ¨¡æ‹Ÿè¾“å…¥ï¼Œå®é™…ä¸Šéå¸¸ç›´è§‚ï¼Œä½†æ˜¯æ•°ç»„å­˜åœ¨ä½¿ç”¨ä¸Šçš„å±€é™æ€§ï¼Œæ¯”å¦‚å…«ä¸ªé‚»æ¥ä½ç½®çš„åˆ¤æ–­ï¼Œéœ€è¦è€ƒè™‘è¾¹ç•Œæ¡ä»¶ã€‚åŒæ—¶åœ¨è¿™ä¸ªé—®é¢˜ä¸­ï¼Œç¬¬äºŒéƒ¨åˆ†éœ€è¦æœç´¢çš„çŸ©é˜µå¤§å°å®é™…ä¸Šåº”è¯¥æ˜¯é€æ¸å‡å°çš„ï¼Œè€Œç”¨æ•°ç»„è¡¨ç¤ºåˆ™æ— æ³•åˆ©ç”¨è¿™ä¸ªä¼˜åŠ¿ã€‚ç”¨ HashSet è¡¨ç¤ºåœ¨å®ç°ä¸Šæ›´åŠ æ–¹ä¾¿ï¼Œé›†åˆåªè®°å½•æ‰€æœ‰å·çº¸çš„åæ ‡ï¼Œæœç´¢é‚»æ¥å…«ä¸ªä½ç½®æ—¶ï¼Œåªéœ€è¦åˆ¤æ–­ä½ç½®æ˜¯å¦ä½äºé›†åˆä¸­ï¼Œä¸å¿…é¢å¤–è€ƒè™‘åæ ‡è¾¹ç•Œæƒ…å†µã€‚è™½ç„¶åœ¨å®ç°ä¸Šæ›´åŠ ç®€ä¾¿ï¼Œä½†æ˜¯æ•ˆç‡å´å˜å·®äº†ï¼Œè™½ç„¶æ—¶é—´å¤æ‚åº¦æ²¡æœ‰å˜åŒ–ï¼Œä½†æ˜¯ HashSet çš„æ“ä½œæ›´åŠ è€—æ—¶ï¼Œæœ€åä¸¤éƒ¨åˆ†çš„è¿è¡Œæ—¶é—´åˆ†åˆ«æ˜¯ 45ms å’Œ 1sã€‚å³ä¾¿æ˜¯ä¼˜åŒ–äº†éƒ¨åˆ† HashSet æ–¹æ³•çš„ä½¿ç”¨ï¼Œæœ€åçš„è¿è¡Œæ—¶é—´ä¾æ—§æ¯”ä¸ä¸Šæ•°ç»„ï¼Œä¸¤éƒ¨åˆ†åˆ†åˆ«åªèƒ½åšåˆ° 48ms å’Œ 437 msã€‚ä»ç¬¬ä¸€éƒ¨åˆ†çš„è¿è¡Œæ—¶é—´å·®è·å¯ä»¥å‘ç°ï¼Œå®é™…ä¸Š HashSet çš„æ•ˆç‡æ˜¯è¿œæ¯”ä¸ä¸Šæ•°ç»„è®¿é—®ã€‚

### åˆæ­¥ä¼˜åŒ–ï¼ˆç¬¬äºŒéƒ¨åˆ†ï¼‰

ç¬¬ä¸€éƒ¨åˆ†å®é™…ä¸Šæ²¡æœ‰ä»€ä¹ˆä¼˜åŒ–ç©ºé—´ï¼Œåœ¨è¿™ä¸ªé—®é¢˜ä¸­ Vec çš„æ•ˆç‡è¿œæ¯” Hash æ•ˆç‡é«˜ï¼Œä¼˜åŒ–çš„ä¸»è¦é›†ä¸­åœ¨ç¬¬äºŒéƒ¨åˆ†ã€‚ç¬¬äºŒéƒ¨åˆ†ä¸­ç§»é™¤æ˜¯åˆ†æ‰¹å®ç°çš„ï¼Œå³å…ˆåˆ¤æ–­æ‰€æœ‰çš„å·çº¸æ˜¯å¦èƒ½è¢«ç§»é™¤ï¼Œç„¶åä¸€æ¬¡æ€§ç§»é™¤ï¼Œæ¥ç€å†æ¬¡åˆ¤æ–­å’Œç§»é™¤ã€‚è¿™æ ·çš„å®ç°å¯ä»¥ç¡®ä¿ç»“æœæ­£ç¡®æ€§ï¼Œä½†æ˜¯èƒ½å¦åˆ¤æ–­ä¸€ä¸ªå°±ç§»é™¤ä¸€ä¸ªå‘¢ï¼Ÿå› ä¸ºæ‰€æœ‰çš„å·çº¸åªå¯èƒ½ä¼šè¢«ç§»é™¤ï¼Œä¸ä¼šæœ‰æ–°çš„å·çº¸äº§ç”Ÿï¼Œå¦‚æœä¸€ä¸ªå·çº¸ç›®å‰æœ‰å››ä¸ªé‚»æ¥çš„å·çº¸ï¼Œè€Œå…¶ä¸­ä¸€ä¸ªå·çº¸è¢«ç§»é™¤äº†ï¼Œé‚£ä¹ˆä¸éœ€è¦ç­‰åˆ°ä¸‹ä¸€æ¬¡åˆ¤æ–­ï¼Œè¿™æ¬¡å°±å¯ä»¥ä¸€å¹¶ç§»é™¤ï¼Œè™½ç„¶ä¹Ÿä¼šæœ‰æ¼ç½‘ä¹‹é±¼ï¼Œä½†ä¹Ÿèƒ½è¾ƒå¤§çš„æé«˜è¿è¡Œæ•ˆç‡ã€‚

å®ç°è¿™ä¸ªä¼˜åŒ–é‡‡ç”¨äºŒç»´çŸ©é˜µæ¯” HashSet æ›´åŠ æ–¹ä¾¿ï¼Œå› ä¸ºåœ¨ Rust ä¸­ä¸€è¾¹éå† HashSet ä¸€è¾¹åˆè¦åˆ é™¤å…ƒç´ æ˜¯æ— æ³•å®ç°çš„ï¼ˆsafeï¼‰ï¼Œä¸€èˆ¬æ¥è¯´ä¹Ÿä¸æ¨èè¿™æ ·åšï¼Œå› ä¸ºä¿®æ”¹éå†å¯¹è±¡å±äºéå†å‰¯ä½œç”¨ï¼Œå¯èƒ½ä¼šå¯¼è‡´å¾ªç¯æ— æ³•ç»“æŸã€‚

åœ¨åˆ©ç”¨ Vec å®ç°è¿™ä¸ªä¼˜åŒ–ä¹‹åï¼Œè¿è¡Œæ—¶é—´å¹¶æ²¡æœ‰å¤§å¹…ä¸‹é™ï¼Œç¬¬äºŒéƒ¨åˆ†è¿è¡Œæ—¶é—´æ˜¯ 173 msï¼Œå·®ä¸å¤šå°‘äº† 100msã€‚

### è¿›ä¸€æ­¥ä¼˜åŒ–

è¿è¡Œæ•ˆç‡ä¸é«˜çš„åŸå› æ˜¯ï¼Œåœ¨æ¯ä¸€ä¸ªå·çº¸ä½ç½®ä¸Šè¿›è¡Œæœç´¢æ—¶ï¼Œéœ€è¦å¯¹é¢†æ¥çš„å…«ä¸ªä½ç½®éƒ½è¿›è¡Œåˆ¤æ–­ï¼Œè€Œè¿™ä¸ªè¿‡ç¨‹åˆéœ€è¦åå¤è¿›è¡Œã€‚å¦‚æœèƒ½å°†æœç´¢é‚»æ¥ä½ç½®çš„ç»“æœè¿›è¡Œç¼“å­˜ï¼Œæˆ–è€…ä¸éœ€è¦æ¯æ¬¡éƒ½è¿›è¡Œåˆ¤æ–­åº”è¯¥å°±èƒ½å¤§å¹…é™ä½è¿è¡Œæ—¶é—´ã€‚

è€ƒè™‘ä½¿ç”¨ HashMap è¡¨ç¤ºè¾“å…¥ï¼Œå…¶é”®ä¸ºå·çº¸åæ ‡ï¼Œå€¼ä¸ºé‚»æ¥çš„å…«ä¸ªä½ç½®ä¸­æœ‰å‡ ä¸ªæ˜¯å·çº¸ã€‚éœ€è¦æå‰ä»è¾“å…¥æ„ç­‘ï¼Œåˆå§‹çš„é‚»æ¥æœç´¢å¿…é¡»è¦è¿›è¡Œã€‚æ¯ä¸€æ¬¡æœç´¢æ—¶ï¼Œé‡åˆ°ä¸€ä¸ªå·çº¸ä½ç½®ï¼Œå¦‚æœå½“å‰å·çº¸å¯ä»¥è¢«ç§»é™¤ï¼Œé‚£ä¹ˆé‚»æ¥å…«ä¸ªä½ç½®åœ¨ HashMap ä¸­çš„å€¼å°±éœ€è¦å‡ 1 ã€‚

å®é™…ä¸Šä¹Ÿå¯ä»¥ä½¿ç”¨ Vec äºŒç»´æ•°ç»„å®ç°ï¼Œè€ƒè™‘ HashMap å¯èƒ½å­˜åœ¨æ“ä½œçš„å¼€é”€ã€‚ä½†æ˜¯è¿™ä¸ªæ€è·¯å¯ä»¥è¿›ä¸€æ­¥å»¶ä¼¸ï¼Œåœ¨æœç´¢ä¸€ä¸ªä½ç½®æ—¶ï¼Œå¦‚æœèƒ½æå‰åˆ¤æ–­é‚»æ¥çš„å…«ä¸ªä½ç½®æ˜¯å¦èƒ½è¢«ç§»é™¤ï¼Œé‚£å°±å¯ä»¥æå‰çš„ç¡®å®šè¿™ä¸ªå·çº¸æ˜¯å¦èƒ½è¢«ç§»é™¤ã€‚å½“ç„¶è¦è§„é¿å¦‚æœ A ç§»é™¤äº†ï¼Œé‚»æ¥çš„ B å°±èƒ½è¢«ç§»é™¤ï¼ŒåŒæ—¶å¦‚æœ B è¢«ç§»é™¤ï¼ŒA ä¹Ÿå°±èƒ½è¢«ç§»é™¤ï¼Œè¿™æ ·çš„äº’ç›¸é™åˆ¶ã€‚

è¿™æ ·çš„ä¼˜åŒ–ç»ˆå½’æ˜¯å±€éƒ¨æ€§çš„ï¼Œå¹¶ä¸æ˜¯ä¸€åŠ³æ°¸é€¸çš„ï¼ŒåŒæ—¶æ˜¯æœ‰äº›ç›²ç›®çš„æ“ä½œã€‚è¿›ä¸€æ­¥æˆ‘åˆæƒ³åˆ°ï¼Œå®ç°è¿™ä¸ªä¼˜åŒ–æœ€å¥½çš„æ•°æ®ç»“æ„æ˜¯ä¼˜å…ˆé˜Ÿåˆ—ï¼Œé”®ä¾æ—§æ˜¯åæ ‡ï¼Œå€¼ä¾æ—§æ˜¯é‚»æ¥çš„å·çº¸æ•°é‡ã€‚è¿™ä¸ªæ€è·¯çœ‹ä¼¼ä¸é”™ï¼Œä½†æ˜¯å¹¶ä¸å®¹æ˜“ï¼Œå› ä¸ºæˆ‘éœ€è¦å¿«é€Ÿçš„æŸ¥æ‰¾æœ€å°å€¼ï¼ŒåŒæ—¶åˆè¦æ±‚ O(1) çš„æ ¹æ®é”®å¹¶ä¿®æ”¹ä¼˜å…ˆçº§ã€‚å¯ä»¥ä½¿ç”¨ HashMap + BinaryHeap å®ç°ï¼ŒHashMap å®æ—¶è®°å½•ä½ç½®å¤„é‚»æ¥å·çº¸çš„æ•°é‡ï¼ŒBinaryHeap æ˜¯æœ€å°å †ï¼Œå¦‚æœå †é¡¶çš„å€¼å¤§äº 4 åˆ™è¯´æ˜æ‰€æœ‰èƒ½è¢«ç§»é™¤çš„å·çº¸å·²ç»è¢«å…¨éƒ¨ç§»é™¤äº†ã€‚ä»£ç å…·ä½“å®ç°å¯è§ [code](https://github.com/livexia/advent-of-code-2025/commit/3ada45bc2ee0c1cb4a47232aae5d158a766f7660#diff-9babad5b20f1c504f9c4b1d031fd57e6f1a1198343b707f377d777b64c50f47b)ï¼Œç¬¬äºŒéƒ¨åˆ†çš„è¿è¡Œæ—¶é—´ä¸‹é™åˆ° 70msã€‚

### ä½¿ç”¨ BFS å®ç°

å‰é¢çš„ä¼˜åŒ–å®é™…ä¸Šå°±æ˜¯æ›´åŠ å¤æ‚çš„ BFS ï¼Œä½†æ˜¯æˆ‘æ˜¯åœ¨é˜…è¯»äº†ç¤¾åŒºçš„é¢˜è§£ä¹‹åæ‰æ„è¯†åˆ°å¯ä»¥ä½¿ç”¨ BFS å®ç°ã€‚

BFS ä¹Ÿéœ€è¦ç”¨åˆ°ä¸¤ä¸ªæ•°æ®ç»“æ„ï¼ŒVecDeque å’Œ HashMap ï¼Œå…¶ä¸­é˜Ÿåˆ—ä¸­ä¿å­˜çš„æ˜¯å½“å‰çŸ©é˜µä¸­é‚»æ¥å·çº¸æ•°é‡å°äº 4 çš„å·çº¸åæ ‡ï¼Œè€Œ HashMap åˆ™ä¸æ–­è®°å½•ç€æ¯ä¸ªå·çº¸çš„é‚»æ¥å·çº¸æ•°é‡ã€‚

æ¯æ¬¡ä»é˜Ÿåˆ—ä¸­å¼¹å‡ºå·çº¸æ—¶ï¼Œæ›´æ–°è¿™ä¸ªå·çº¸çš„é‚»æ¥å·çº¸çš„é‚»æ¥æ•°é‡ï¼Œå¦‚æœæ•°é‡å°äº 4 åˆ™å°†è¯¥é‚»æ¥å·çº¸å…¥é˜Ÿï¼Œä¾æ¬¡è¿›è¡Œç›´åˆ°é˜Ÿåˆ—ä¸ºç©ºã€‚å…·ä½“å®ç°è§ä»£ç  [code](https://github.com/livexia/advent-of-code-2025/blob/main/aoc04/src/main.rs)ï¼Œç¬¬äºŒéƒ¨åˆ†è¿è¡Œæ—¶é—´å·®ä¸å¤šæ˜¯ 70ms ï¼Œè¿™ä¸ª BFS å®é™…ä¸Šå’Œå‰é¢çš„ä¼˜åŒ–æ˜¯ä¸€è‡´çš„ï¼Œæ‰€ä»¥åœ¨æ—¶é—´ä¸Šæ²¡æœ‰å¿«å¾ˆå¤šï¼Œä½†æ˜¯ç®—æ³•æ›´åŠ ç®€æ´å®ç°ä¹Ÿæ›´åŠ å®¹æ˜“ã€‚

å› ä¸ºæš´åŠ›çš„æ–¹æ³•å¾ˆç®€å•ï¼Œæ‰€ä»¥æ²¡æœ‰å•åˆ—ä¸ä»£ç ä¸­ï¼Œå› ä¸ºå¾ˆä¹…æ²¡å†™ä»£ç äº†ï¼Œæ‰€ä»¥å¯¹äº BFS æœ‰æ‰€æ¨¡ç³Šï¼Œæœ€ç»ˆçš„ä»£ç ä¹‹ä¿ç•™äº† BFS çš„å®ç°ï¼ŒBFS ä¸­ä½¿ç”¨åˆ°çš„ Hash æ•°æ®ç»“æ„ä¹Ÿå¯ä»¥é€šè¿‡ Vec æ›¿ä»£ï¼Œå› ä¸ºè¾“å…¥è¾ƒå°è¿™æ ·ä¹Ÿå¯ä»¥æé«˜å®é™…çš„è¿è¡Œæ•ˆç‡ï¼ŒåŒæ—¶æåŠçš„è¿è¡Œæ—¶é—´éƒ½æ˜¯ debug ä¸‹å¾—åˆ°çš„ï¼Œrelease çš„è¿è¡Œæ—¶é—´ä¼šæ›´å°‘ã€‚

## Day 5

ä»Šå¤©æ˜¯åŒºé—´é¢˜ï¼Œè¾“å…¥åˆ†ä¸ºä¸¤ä¸ªéƒ¨åˆ†ï¼Œç¬¬ä¸€éƒ¨åˆ†ä¸ºåŒºé—´åˆ—è¡¨ï¼Œç¬¬äºŒéƒ¨åˆ†ä¸ºç°æœ‰ id åˆ—è¡¨ã€‚ç¬¬ä¸€éƒ¨åˆ†çš„é¢˜ç›®è¦æ±‚è®¡ç®—æœ‰å¤šå°‘ id è½åœ¨ç»™å®šçš„åŒºé—´ä¸­ã€‚ç¬¬ä¸€éƒ¨åˆ†ç®€å•çš„æš´åŠ›å¾ªç¯éå†å³å¯ï¼ŒåŒæ ·ä¹Ÿå¯ä»¥å°†åŒºé—´åˆ—è¡¨åˆå¹¶ç„¶åæ’åºï¼Œå†æ ¹æ®åŒºé—´èµ·ç‚¹å¯¹ id è¿›è¡ŒäºŒåˆ†æœç´¢ï¼Œä»¥é™ä½è¿è¡Œæ—¶é—´æé«˜è¿è¡Œæ•ˆç‡ï¼Œè§ [ä»£ç ](https://github.com/livexia/advent-of-code-2025/commit/f3f498a089d29dda64e26aba6e07ada9a0ccf158)ã€‚

ç¬¬äºŒéƒ¨åˆ†åˆ™éœ€è¦è®¡ç®—æ‰€æœ‰åŒºé—´åˆ—è¡¨ä¸­å¯èƒ½çš„æ‰€æœ‰ id ï¼Œå½“ç„¶ä¸å…è®¸é‡å¤çš„ id ã€‚å› ä¸ºç»™å®šçš„åŒºé—´å­˜åœ¨å¤§é‡é‡å çš„æƒ…å†µï¼Œè€Œä¸”ç”±äºå®é™…çš„è¾“å…¥åŒºé—´è¾ƒå¤šä¸”è¾ƒå¤§ï¼Œé‚£ä¹ˆé€šè¿‡éå†æ‰€æœ‰åŒºé—´å¯èƒ½çš„ id å°±ä¸ç°å®äº†ã€‚é‚£ä¹ˆå°±éœ€è¦åˆå¹¶åŒºé—´ï¼Œè€Œè¦åˆå¹¶æ‰€æœ‰åŒºé—´çš„ç¬¬ä¸€æ­¥å°±æ˜¯åˆå¹¶ä¸¤ä¸ªåŒºé—´ã€‚

### åˆå¹¶ä¸¤ä¸ªåŒºé—´

é¦–å…ˆæ ¹æ®åŒºé—´çš„èµ·ç‚¹æ’åºå¹¶äº¤æ¢ç»™å®šçš„ä¸¤ä¸ªåŒºé—´ A å’Œ Bï¼ŒåŒºé—´ A ä¸ºèµ·ç‚¹è¾ƒå°çš„åŒºé—´ï¼Œé‚£ä¹ˆå¦‚æœ A çš„ç»ˆç‚¹å¤§äºæˆ–ç­‰äºåŒºé—´ B çš„ç»ˆç‚¹ï¼Œé‚£ä¹ˆåˆå¹¶åçš„åŒºé—´å°±æ˜¯ A ï¼Œå¦‚æœ A çš„ç»ˆç‚¹å°äº B çš„ç»ˆç‚¹ï¼Œé‚£ä¹ˆåˆå¹¶åçš„åŒºé—´å°±æ˜¯ A çš„èµ·ç‚¹åˆ° B çš„ç»ˆç‚¹ã€‚

é¢˜ç›®çš„**åŒºé—´æ˜¯ä¸¤å¤´éƒ½å°é—­çš„**ï¼Œé‚£ä¹ˆå¦‚æœä¸¤ä¸ªåŒºé—´å¤´å°¾ç›¸æ¥ï¼Œåˆ™è¿™ä¸¤ä¸ªåŒºé—´ä¹Ÿå¯ä»¥åˆå¹¶ã€‚
ä»£ç 

```rust
fn merge_range(r: IdRange, other: IdRange) -> Option<IdRange> {
    let (r, other) = if r.0 > other.0 {
        (other, r)
    } else {
        (r, other)
    };
    if r.1 + 1 < other.0 {
        None
    } else {
        Some((r.0, r.1.max(other.1)))
    }
}
```

### åˆå¹¶æ‰€æœ‰çš„åŒºé—´

~~æˆ‘ä¸€å¼€å§‹ä¸æƒ³ä½¿ç”¨ç¬¨æ–¹æ³•ï¼Œä½†æ˜¯ç®€å•çš„å‡ æ¬¡å°è¯•ä¹‹åå‘ç°éƒ½ä¸è¡Œï¼Œäºæ˜¯ä½¿ç”¨ç¬¨æ–¹æ³•å¾—å‡ºäº†ç­”æ¡ˆã€‚å­˜åœ¨ä¸¤ä¸ªé˜Ÿåˆ—ï¼Œé˜Ÿåˆ— A æ˜¯ç­‰å¾…åˆå¹¶çš„åŒºé—´ï¼Œé˜Ÿåˆ— B æ˜¯å·²ç»åˆå¹¶çš„åŒºé—´ã€‚æ¯æ¬¡ä»é˜Ÿ A å¼¹å‡ºä¸€ä¸ªåŒºé—´ aï¼Œå¾ªç¯éå†é˜Ÿåˆ— B çš„åŒºé—´ bï¼Œç›´åˆ° a èƒ½å’Œ b åˆå¹¶ï¼Œå°†åˆå¹¶åçš„åŒºé—´æ”¾å…¥é˜Ÿåˆ— B ï¼Œç›´åˆ°é˜Ÿåˆ— A ä¸ºç©ºã€‚ç„¶åäº¤æ¢é˜Ÿåˆ— A å’Œ B å†æ¬¡å¾ªç¯ï¼Œç›´åˆ°æ²¡æœ‰ä»»ä½•æ–°çš„åˆå¹¶å‘ç”Ÿï¼Œæ­¤æ—¶æ‰€æœ‰çš„åŒºé—´éƒ½å®Œæˆäº†åˆå¹¶ï¼Œç¬¬äºŒéƒ¨åˆ†çš„ç­”æ¡ˆåªéœ€è¦è®¡ç®—åŒºé—´çš„é•¿åº¦å³å¯ã€‚~~

ç»è¿‡ä¸€ç•ªæœç´¢ä¹‹åï¼Œæˆ‘å‘ç°äº†ä¸€ä¸ªåˆå¹¶æ‰€æœ‰åŒºé—´çš„[ç®—æ³•](https://stackoverflow.com/a/5276789)ï¼Œæˆ‘æ‰æ„è¯†åˆ°å¤ªä¹…æ²¡å†™ä»£ç è®©æˆ‘çš„æ€ç»´æœ‰äº›æ…¢äº†ï¼Œå› ä¸ºæ˜æ˜æ˜¯å¾ˆç®€å•ç®—æ³•ï¼Œæ²¡é“ç†æˆ‘ä¸çŸ¥é“çš„ã€‚

ç®—æ³•

1. æ’åº (Sort): é¦–å…ˆæŒ‰åŒºé—´çš„èµ·å§‹ç‚¹è¿›è¡Œæ’åºã€‚
2. åˆå¹¶ (Merge): ç„¶åéå†æ’åºåçš„åˆ—è¡¨ã€‚
3. å¾ªç¯ï¼š
    1. åˆå§‹åŒºé—´ current ä¸ºæ’åºåçš„ç¬¬ä¸€ä¸ªåŒºé—´
    2. ä»æ’åºåçš„ç¬¬äºŒä¸ªåŒºé—´å¼€å§‹éå†åŒºé—´ nextã€‚
    3. å¦‚æœ current å’Œ next å¯ä»¥åˆå¹¶ä¸ºåŒºé—´ mï¼Œä»¤ current = m å¾ªç¯ç»§ç»­ã€‚
    4. å¦‚æœä¸èƒ½åˆå¹¶ï¼Œåˆ™å°† current æ”¾å…¥å·²ç»å®Œæˆåˆå¹¶çš„åŒºé—´æ•°ç»„ï¼ŒåŒæ—¶ä»¤ current = next å¾ªç¯ç»§ç»­ã€‚
        - å…·ä½“è¯´æ˜ï¼šå¦‚æœä¸èƒ½åˆå¹¶ï¼Œåˆ™è¯´æ˜ current å’Œ next ä¸å­˜åœ¨é‡å ï¼Œç”±äºåŒºé—´æ˜¯æœ‰åºçš„ï¼Œé‚£ä¹ˆåŒ…æ‹¬ next ä¹‹åçš„æ‰€æœ‰åŒºé—´éƒ½æ— æ³•å’Œ current åˆå¹¶ã€‚å³ current å·²ç»æ˜¯ç¡®å®šçš„å®Œæˆåˆå¹¶çš„åŒºé—´ï¼Œå¯ä»¥ä¸å¿…å†è€ƒè™‘æ˜¯å¦èƒ½å’Œå…¶ä»–åŒºé—´åˆå¹¶ã€‚
    5. å¾ªç¯ç»“æŸåï¼Œéœ€è¦å°†æœ€åçš„ current æ”¾å…¥å·²ç»å®Œæˆåˆå¹¶çš„åŒºé—´æ•°ç»„ï¼Œé¿å…é—æ¼ã€‚

ä»£ç 

```rust
fn merge_ranges(ranges: &[IdRange]) -> Vec<IdRange> {
    let mut ranges = ranges.to_vec();
    ranges.sort();
    let mut merged = vec![];

    let mut current = ranges[0];

    for &next in &ranges[1..] {
        if let Some(m) = merge_range(current, next) {
            current = m;
        } else {
            merged.push(current);
            current = next;
        }
    }
    merged.push(current);
    merged
}
```

## Day 6

ä»Šå¤©çš„é¢˜ç›®æœ‰ç‚¹é™·é˜±é¢˜çš„æ„æ€ï¼Œé™·é˜±ä¸»è¦åœ¨äºè¾“å…¥çš„å¤„ç†ä¸Šï¼Œè¾“å…¥ç±»ä¼¼äºè¡¨æ ¼çš„å½¢å¼ï¼Œçœ‹åˆ°è¿™ä¸ªè¾“å…¥ç«‹é©¬æŒ‰ç…§è¡Œè¿›è¡Œäº†å¤„ç†ï¼Œå°†ä¸€ä¸ªä¸ªæ•°å­—å’Œè¿ç®—ç¬¦è§£æå‡ºæ¥ï¼Œæœ€ç»ˆå½¢æˆä¸¤ä¸ªæ•°ç»„ï¼Œè¿™æ ·å¤„ç†ä¹‹åè½»æ¾çš„å°±èƒ½å®Œæˆç¬¬ä¸€éƒ¨åˆ†ã€‚


### åˆ—è§£æä¸é€†åºè®¡ç®—

ç¬¬äºŒéƒ¨åˆ†çš„æ ¸å¿ƒæŒ‘æˆ˜åœ¨äºå¿…é¡»é‡‡ç”¨**é€†åºçš„ã€åŸºäºåˆ—**çš„è§£ææ–¹å¼ï¼Œè€Œéä¼ ç»Ÿçš„è¡Œå¤„ç†ã€‚ä¸ºäº†é«˜æ•ˆå®ç°è¿™ä¸€ç›®æ ‡ï¼Œæˆ‘ä»¬å¯¹è¾“å…¥æ•°æ®è¿›è¡Œäº†é¢„å¤„ç†ï¼Œå¹¶å°†è¿ç®—é€»è¾‘ä¸æ•°æ®ç´¯ç§¯åˆ†ç¦»ã€‚

#### 1. æ•°æ®é¢„å¤„ç†ï¼ˆé€†åºåŒ–ï¼‰

* **ç›®æ ‡:** å®ç°ä»å³åˆ°å·¦çš„åˆ—è¿­ä»£ã€‚
* **æ–¹æ³•:** å¯¹è¾“å…¥æ–‡æœ¬çš„æ¯ä¸€è¡Œï¼ˆå»é™¤ç©ºè¡Œåï¼‰ï¼Œå°†å…¶**å­—èŠ‚åºåˆ—é€†åº**ã€‚
    * ä¾‹å¦‚ï¼šåŸè¾“å…¥è¡Œ `4 123` é¢„å¤„ç†åå˜ä¸º `[3, 2, 1, ' ' , 4]` (å­—èŠ‚è¡¨ç¤º)ã€‚
* **ç»“æœ:** `lines: Vec<Vec<u8>>` æ•°ç»„ä¸­çš„åˆ—ç´¢å¼• $i$ ï¼ˆä» 0 å¼€å§‹ï¼‰ç°åœ¨å¯¹åº”åŸå§‹è¾“å…¥ä¸­çš„**ä»å³å¾€å·¦**çš„åˆ—ã€‚

#### 2. æ ¸å¿ƒè®¡ç®—æµç¨‹ï¼ˆé€åˆ—è¿­ä»£ï¼‰

ä»£ç ä» $i=0$ å¼€å§‹ï¼Œé€åˆ—å‘å·¦è¿­ä»£ï¼Œå¹¶åœ¨æ¯ä¸ªåˆ—ä¸Šæ‰§è¡Œä¸¤ä¸ªä¸»è¦åŠ¨ä½œï¼š**æ•°å­—æå–**å’Œ**æ“ä½œç¬¦åˆ¤æ–­**ã€‚

##### A. æ•°å­—æå– (`real`)

å¯¹äºå½“å‰åˆ— $i$:

1.  **èŒƒå›´:** ä»…æŸ¥çœ‹**æ“ä½œç¬¦è¡Œä¹‹ä¸Š**çš„æ‰€æœ‰è¡Œï¼ˆå³é™¤äº†æœ€åä¸€è¡Œï¼‰ã€‚
2.  **è¿‡æ»¤:** å¿½ç•¥å½“å‰åˆ—ä¸­çš„æ‰€æœ‰**ç©ºæ ¼** (`b' '`) å­—ç¬¦ã€‚
3.  **ç»„åˆ:** å°†å½“å‰åˆ—ä¸­ï¼Œä»ä¸Šåˆ°ä¸‹é‡åˆ°çš„æ‰€æœ‰æ•°å­—å­—ç¬¦**ç»„åˆæˆä¸€ä¸ªå¤šä½æ•°å­—** `real`ã€‚
    * **å…¬å¼:** é‡‡ç”¨ **`fold(0, |r, n| r * 10 + n)`** å®ç°ï¼Œå…¶ä¸­ $r$ æ˜¯ç´¯ç§¯ç»“æœï¼Œ$n$ æ˜¯å½“å‰è¡Œæ•°å­—ã€‚

##### B. æ“ä½œç¬¦åˆ¤æ–­ä¸è®¡ç®—

æ£€æŸ¥**æœ€åä¸€è¡Œ**ï¼ˆæ“ä½œç¬¦è¡Œï¼‰åœ¨å½“å‰åˆ— $i$ ä¸Šçš„å­—ç¬¦ï¼Œæ ¹æ®å…¶ç±»å‹æ‰§è¡Œç›¸åº”çš„é€»è¾‘ã€‚

| æœ€åä¸€è¡Œå­—ç¬¦ | æå–çš„ `real` å€¼ | åŠ¨ä½œæè¿° | å¯¹ `ans` çš„å½±å“ | `reals` æ•°ç»„å˜åŒ– |
| :--- | :--- | :--- | :--- | :--- |
| `b'+'` | ä»»ä½•å€¼ | **åŠ æ³•è¿ç®—**ã€‚ | $ans += \text{sum}(\text{reals}) + \text{real}$ | æ¸…ç©º (`reals.clear()`) |
| `b'*'` | ä»»ä½•å€¼ | **ä¹˜æ³•è¿ç®—**ã€‚ | $ans += \text{product}(\text{reals}) \times \text{real}$ | æ¸…ç©º (`reals.clear()`) |
| ä»»ä½•å…¶ä»–å­—ç¬¦ | $> 0$ | **æ•°å­—ç´¯ç§¯**ã€‚ | æ—  | æ¨å…¥å½“å‰æ•°å­— (`reals.push(real)`) |
| ä»»ä½•å­—ç¬¦ | $= 0$ | **åºåˆ—ä¸­æ–­**ã€‚ | æ—  | æ¸…ç©º (`reals.clear()`) |

> **`reals` æ•°ç»„**ï¼šç”¨äºä¸´æ—¶å­˜å‚¨åœ¨ä¸€ç³»åˆ—éæ“ä½œç¬¦åˆ—ä¸­æå–åˆ°çš„æ•°å­—ï¼Œç›´åˆ°é‡åˆ°æ“ä½œç¬¦ä¸ºæ­¢ã€‚

#### 3. ç»“æœ

é€šè¿‡è¿™ç§é€åˆ—ã€é€†åºçš„è§£æå’Œå³æ—¶è®¡ç®—ï¼Œæœ‰æ•ˆåœ°è§£å†³äº†ç¬¬äºŒéƒ¨åˆ†è¦æ±‚çš„è®¡ç®—é€»è¾‘ï¼Œé¿å…äº†å¤æ‚çš„ä¸­é—´æ•°æ®ç»“æ„è½¬æ¢ï¼Œå®ç°äº†é«˜æ•ˆçš„ç®—æ³•ã€‚

ç¬¬äºŒéƒ¨åˆ†ä»£ç 

```rust
fn part2<T: AsRef<str>>(input: T) -> Result<usize> {
    let _start = Instant::now();

    let mut ans = 0;
    let lines: Vec<Vec<_>> = input
        .as_ref()
        .lines()
        .filter(|l| !l.trim().is_empty())
        .map(|l| l.bytes().rev().collect())
        .collect();
    let op_row = lines.len() - 1;
    let mut reals = vec![];

    for i in 0..lines[0].len() {
        let real = lines[0..op_row]
            .iter()
            .filter_map(|row| {
                if row[i] == b' ' {
                    None
                } else {
                    Some((row[i] - b'0') as usize)
                }
            })
            .fold(0, |r, n| r * 10 + n);
        match lines[op_row][i] {
            b'+' => ans += reals.iter().sum::<usize>() + real,
            b'*' => ans += reals.iter().product::<usize>() * real,
            _ => {
                if real == 0 {
                    reals.clear();
                } else {
                    reals.push(real);
                }
            }
        }
    }

    println!("part 2: {ans}");
    println!("> Time elapsed is: {:?}", _start.elapsed());
    Ok(ans)
}
```
## Day 7

ä»Šå¤©çš„é¢˜ç›®éš¾åº¦é€‚ä¸­ï¼Œæ ¸å¿ƒåœ¨äºé«˜æ•ˆåœ°è¿½è¸ªå…‰æŸï¼ˆbeamsï¼‰çš„åˆ†è£‚ä¸ä¼ æ’­ã€‚è§£é¢˜ç­–ç•¥ç»å†äº†ä»é€šç”¨å›¾æœç´¢åˆ°**é«˜æ•ˆçš„è¡Œçº§éå†**çš„æ¼”å˜ã€‚

### 1\. åˆå§‹è§£æ³•ï¼šå›¾æœç´¢ç­–ç•¥ (BFS / DFS)

åˆå§‹é˜¶æ®µï¼Œé—®é¢˜è¢«è§†ä¸ºå›¾æœç´¢é—®é¢˜ï¼Œç›®çš„æ˜¯è¦†ç›–æ‰€æœ‰å¯èƒ½è·¯å¾„å¹¶è®¡ç®—å…¶ç»„åˆï¼š

#### 1\. BFS éƒ¨åˆ†ï¼šè·¯å¾„æŸ¥æ‰¾ä¸å»é‡

å¯¹äºç¬¬ä¸€éƒ¨åˆ†ï¼Œå…³é”®åœ¨äºè¿½è¸ªå…‰æŸï¼ˆbeamsï¼‰çš„ç§»åŠ¨è·¯å¾„å¹¶é¿å…é‡å¤è®¡ç®—ã€‚

  * æˆ‘ä»¬ä½¿ç”¨ **BFS** æ¥ç¡®å®šæ‰€æœ‰å¯èƒ½è¢«å…‰æŸåˆ°è¾¾çš„ä½ç½®ã€‚
  * åœ¨ BFS è¿‡ç¨‹ä¸­ï¼Œå¿…é¡»è®°å½•å…‰æŸ**å·²ç»åˆ°è¿‡çš„ä½ç½®**ï¼Œä»¥é˜²æ­¢**é‡å¤åˆ†å‰²**æˆ–é™·å…¥**æ­»å¾ªç¯**ã€‚è¿™ç›¸å½“äºä½¿ç”¨ä¸€ä¸ªé›†åˆï¼ˆSet/Visited Arrayï¼‰æ¥é¿å…å¯¹åŒä¸€çŠ¶æ€çš„é‡å¤æ¢ç´¢ã€‚

#### 2\. DFS éƒ¨åˆ†ï¼šç»“æœç¼“å­˜ä¸ä¼˜åŒ–

å¯¹äºç¬¬äºŒéƒ¨åˆ†ï¼Œç›®æ ‡æ˜¯è®¡ç®—ä»æ¯ä¸ªåˆ†å‰²ç‚¹èƒ½äº§ç”Ÿçš„**å¹³è¡Œä¸–ç•Œæ€»æ•°**ã€‚

  * æˆ‘ä»¬ä½¿ç”¨ **DFS** æ¥é€’å½’åœ°è®¡ç®—ä»ä»»æ„åˆ†å‰²å¤„å¼€å§‹çš„è·¯å¾„æ€»æ•°ã€‚
  * ä¸ºæé«˜æ•ˆç‡ï¼Œå¿…é¡»å¼•å…¥**ä¸­é—´ç»“æœç¼“å­˜**ï¼ˆ**Memoization** / åŠ¨æ€è§„åˆ’ï¼‰ã€‚æˆ‘ä»¬è®°å½•ä»**ä»»æ„ä¸€ä¸ªåˆ†å‰²å¤„**æœ€ç»ˆå¯èƒ½åˆ†å‰²å‡ºçš„å¹³è¡Œä¸–ç•Œæ€»æ•°ï¼Œä»è€Œé¿å…é‡å¤è®¡ç®—ç›¸åŒå­é—®é¢˜ã€‚

### 2\. æ•°æ®ç»“æ„çš„é€‰æ‹©ä¸ä¼˜åŒ–

åœ¨æ•°æ®ç»“æ„çš„é€‰æ‹©ä¸Šï¼Œæˆ‘ä»¬è¿›è¡Œäº†ä»¥ä¸‹æƒè¡¡ï¼š

  * æœ€åˆé‡‡ç”¨ **HashMap** æ¥è¡¨ç¤ºè¾“å…¥æ•°æ®æ˜¯ä¸ºäº†ç®€åŒ–è¾¹ç•Œå€¼åˆ¤æ–­ã€‚
  * é€šè¿‡åˆ†æé¢˜ç›®çº¦æŸï¼ˆå…‰æŸ**ä¸ä¼šè§¦å‘å·¦å³è¾¹ç•Œ**ï¼Œä¸”**åªä¼šå‘ä¸‹ç§»åŠ¨**ï¼‰ï¼Œæˆ‘ä»¬å‘ç°è¾“å…¥å®é™…ä¸Šæ˜¯ä¸€ä¸ª**ç¨€ç–çŸ©é˜µ**ä¸”ç§»åŠ¨æ–¹å‘å—é™ã€‚
  * å› æ­¤ï¼Œç†è®ºä¸Šä½¿ç”¨**äºŒç»´å‘é‡ (`Vec<Vec<T>>`)** çš„æ•ˆç‡å°†**æ˜¾è‘—é«˜äº** HashMapï¼Œèƒ½å¸¦æ¥æ›´å¥½çš„**ç©ºé—´å±€éƒ¨æ€§**å’Œæ›´å¿«çš„è®¿é—®é€Ÿåº¦ã€‚
  * **æœ€ç»ˆç»“è®ºï¼š** å°½ç®¡è¿›è¡Œäº†æ•°æ®ç»“æ„æ›¿æ¢ï¼Œå®é™…è¿è¡Œæ•ˆç‡æå‡ä¸æ˜æ˜¾ï¼Œè¯´æ˜æ€§èƒ½ç“¶é¢ˆä¸»è¦åœ¨äº**å®é™…çš„è¿ç®—é€»è¾‘**è€Œéæ•°æ®ç»“æ„æœ¬èº«ã€‚

### 3\. ğŸš€ æœ€ç»ˆä¼˜åŒ–ï¼šè¡Œçº§éå†ä¸è¾“å…¥ç‰¹æ€§åˆ©ç”¨ (Part 1)

é€šè¿‡åˆ†æé—®é¢˜ç‰¹æ€§ï¼Œæˆ‘ä»¬å‘ç°ç¬¬ä¸€éƒ¨åˆ†æ— éœ€ä½¿ç”¨å¤æ‚çš„ BFS è¿›è¡ŒçŠ¶æ€è¿½è¸ªã€‚ç”±äºå…‰æŸåªå‘ä¸‹ä¼ æ’­ï¼Œæˆ‘ä»¬å¯ä»¥é‡‡ç”¨**æŒ‰è¡Œé¡ºåºéå†**çš„æ–¹æ³•ï¼Œ**ç»´æŠ¤å½“å‰è¡Œå…‰æŸçš„çŠ¶æ€**ï¼Œä»è€Œå®ç°æ›´é«˜æ•ˆçš„çº¿æ€§æ—¶é—´å¤æ‚åº¦ã€‚

#### æ ¸å¿ƒç®—æ³•é€»è¾‘ï¼š

æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªå¸ƒå°”å‹æ•°ç»„ `beams`ï¼Œå…¶ä¸­ `beams[j] = true` è¡¨ç¤ºåœ¨å½“å‰è¡Œï¼Œæœ‰ä¸€æŸå…‰ä¼šè½åˆ°ç¬¬ $j$ åˆ—ã€‚

1.  **åˆå§‹åŒ–ï¼š** `beams` æ•°ç»„æ ¹æ®ç¬¬ä¸€è¡Œçš„èµ·å§‹å…‰æŸè¿›è¡Œåˆå§‹åŒ–ã€‚
2.  **æŒ‰è¡Œè¿­ä»£ï¼š** éå†è¾“å…¥ç½‘æ ¼çš„æ¯ä¸€è¡Œã€‚
3.  **å¤„ç†åˆ†å‰²ï¼š** å¯¹äºå½“å‰è¡Œä¸­çš„æ¯ä¸ªåˆ†å‰²å™¨ï¼ˆä¾‹å¦‚ `'^'`ï¼‰ï¼Œå¦‚æœè¯¥åˆ—å­˜åœ¨å…‰æŸ (`beams[j] == true`)ï¼Œåˆ™**é”€æ¯åŸå…‰æŸ**å¹¶**ç”Ÿæˆå·¦å³ä¸¤ä¾§çš„æ–°å…‰æŸ**ï¼ŒåŒæ—¶å¢åŠ åˆ†å‰²è®¡æ•°ã€‚

#### ä¼˜åŒ–ç‚¹ï¼šåˆ©ç”¨è¾“å…¥çš„å‘¨æœŸæ€§

é€šè¿‡è§‚å¯Ÿè¾“å…¥æ•°æ®å’Œé¢˜ç›®è¦æ±‚ï¼Œæˆ‘ä»¬å‘ç°ä¸€ä¸ªå…³é”®çš„ä¼˜åŒ–æœºä¼šï¼š

  * **å‘¨æœŸæ€§ï¼š** æ‰€æœ‰çš„åˆ†å‰²å™¨ (`splitter`) éƒ½ä»¥**éš”è¡Œ**çš„æ–¹å¼å‡ºç°ã€‚
  * **é€»è¾‘æ¨è®ºï¼š** ä¸€æŸå…‰æŸé‡åˆ°åˆ†å‰²å™¨å¹¶åˆ†è£‚åï¼Œä¸‹ä¸€è¡Œå¿…å®šæ˜¯**ç©ºè¡Œ**ï¼ˆå³ä¸å­˜åœ¨åˆ†å‰²å™¨ï¼‰ã€‚è¿™æ„å‘³ç€å…‰æŸé‡åˆ°åˆ†è£‚å™¨åï¼Œ**è‡³å°‘éœ€è¦è·³è¿‡ä¸€è¡Œ**æ‰èƒ½å†æ¬¡é‡åˆ°ä¸‹ä¸€ä¸ªå¯èƒ½çš„åˆ†è£‚å™¨ã€‚
  * **æ•ˆæœï¼š** è¿™ç§å‘¨æœŸæ€§å…è®¸æˆ‘ä»¬ä½¿ç”¨ `step_by(2)` æ¥è·³è¿‡ç©ºè¡Œï¼Œä»è€Œå°†å®é™…è¿­ä»£æ¬¡æ•°å‡å°‘è¿‘ä¸€åŠã€‚

åˆ©ç”¨è¿™ä¸€ç‰¹æ€§ï¼Œç¨‹åºè¿è¡Œæ—¶é—´ä»çº¦ $1 \text{ms}$ **å¤§å¹…é™ä½**è‡³çº¦ $80 \mu \text{s}$ï¼Œä½“ç°äº†ç®—æ³•ä¼˜åŒ–å¸¦æ¥çš„å·¨å¤§æ€§èƒ½æå‡ã€‚

#### æ ¸å¿ƒä»£ç å±•ç¤º (Rust):

```rust
fn part1(grid: &Grid) -> Result<usize> {
    let _start = Instant::now();

    let mut count = 0;
    // åˆå§‹åŒ–ç¬¬ä¸€è¡Œå…‰æŸçŠ¶æ€
    let mut beams: Vec<_> = grid[0].iter().map(|c| c == &'S').collect();

    // åˆ©ç”¨ step_by(2) è·³è¿‡ä¸åŒ…å« splitter çš„ç©ºè¡Œï¼Œè¿›ä¸€æ­¥ä¼˜åŒ–æ€§èƒ½
    for row in grid.iter().step_by(2) {
        // è¿­ä»£å½“å‰è¡Œçš„æ¯ä¸€åˆ—
        for j in 0..beams.len() {
            // å¦‚æœå­˜åœ¨å…‰æŸä¸”å½“å‰ä½ç½®æ˜¯åˆ†è£‚å™¨
            if beams[j] && row[j] == '^' {
                beams[j] = false;       // é”€æ¯åŸå…‰æŸ
                beams[j - 1] = true;    // ç”Ÿæˆå·¦ä¾§æ–°å…‰æŸï¼ˆåˆ©ç”¨é¢˜ç›®çº¦æŸï¼šä¸è§¦å‘è¾¹ç•Œï¼‰
                beams[j + 1] = true;    // ç”Ÿæˆå³ä¾§æ–°å…‰æŸï¼ˆåˆ©ç”¨é¢˜ç›®çº¦æŸï¼šä¸è§¦å‘è¾¹ç•Œï¼‰
                count += 1;
            }
        }
    }

    println!("part 1: {count}");
    println!("> Time elapsed is: {:?}", _start.elapsed());
    Ok(count)
}
```

### 4. ç¬¬äºŒéƒ¨åˆ†ï¼šåŠ¨æ€è§„åˆ’ä¸è·¯å¾„è®¡æ•°ä¼˜åŒ–

ç¬¬äºŒéƒ¨åˆ†çš„ç›®æ ‡æ˜¯è®¡ç®—ä»èµ·å§‹ç‚¹åˆ°ç»ˆç‚¹ï¼Œæ‰€æœ‰å¯èƒ½äº§ç”Ÿçš„**å¹³è¡Œä¸–ç•Œï¼ˆæ—¶é—´çº¿ï¼‰çš„æ€»æ•°**ã€‚è™½ç„¶é—®é¢˜æœ¬è´¨ä¸Šæ˜¯è·¯å¾„è®¡æ•°ï¼Œä½†æœ€ä¼˜è§£æ³•æ˜¯é‡‡ç”¨\*\*è‡ªé¡¶å‘ä¸‹çš„åŠ¨æ€è§„åˆ’ï¼ˆDPï¼‰\*\*æ€æƒ³ï¼Œåˆ©ç”¨è¡Œçº§éå†å®ç°é«˜æ•ˆè®¡ç®—ã€‚

#### 1\. æ ¸å¿ƒæ€æƒ³ï¼šåŠ¨æ€è§„åˆ’è·¯å¾„ç´¯åŠ 

æˆ‘ä»¬ä¸å†ä½¿ç”¨é€’å½’ DFS åŠ ç¼“å­˜ (Memoization)ï¼Œè€Œæ˜¯é‡‡ç”¨**è¿­ä»£å¼ DP**ï¼ŒæŒ‰è¡Œé¡ºåºè®¡ç®—ï¼š

  * **çŠ¶æ€å®šä¹‰ï¼š** æˆ‘ä»¬ç»´æŠ¤ä¸€ä¸ªæ•°ç»„ `timelines`ï¼Œå…¶ä¸­ `timelines[j]` è®°å½•äº†å…‰æŸåˆ°è¾¾å½“å‰å¤„ç†è¡Œæ—¶ï¼Œ**ç¬¬ $j$ åˆ—ç´¯è®¡äº†å¤šå°‘æ¡ä¸åŒçš„æ—¶é—´çº¿ï¼ˆè·¯å¾„ï¼‰**ã€‚
  * **è½¬ç§»æ–¹ç¨‹ï¼ˆåˆ†å‰ï¼‰ï¼š** å½“å…‰æŸåœ¨ç¬¬ $j$ åˆ—é‡åˆ°åˆ†å‰å™¨ (`^`) æ—¶ï¼Œè¯¥åˆ—çš„è·¯å¾„æ•° `timelines[j]` ä¼šè¢«å…¨éƒ¨è½¬ç§»åˆ°ä¸‹ä¸€è¡Œå¯¹åº”çš„å·¦å³ä¸¤åˆ—ã€‚

#### 2\. ç®—æ³•å®ç°ä¸çŠ¶æ€ç»´æŠ¤

æˆ‘ä»¬ä½¿ç”¨ä¸¤ä¸ªæ•°ç»„åœ¨æ¯ä¸€æ­¥è¿­ä»£ä¸­è¿›è¡ŒçŠ¶æ€è½¬ç§»ï¼š

  * **`timelines` (Prev):** è®°å½•**å½“å‰è¡Œ**æ¯ä¸ªä½ç½®çš„ç´¯è®¡æ—¶é—´çº¿æ•°ã€‚
  * **`next` (Current):** è®°å½•è¿™äº›æ—¶é—´çº¿è½¬ç§»åï¼Œåœ¨**ä¸‹ä¸€è¡Œ**æ¯ä¸ªä½ç½®ç´¯è®¡çš„æ—¶é—´çº¿æ•°ã€‚

åœ¨éå†å½“å‰è¡Œæ—¶ï¼š

1.  å¦‚æœç¬¬ $j$ åˆ—å­˜åœ¨æ—¶é—´çº¿ä¸”é‡åˆ°åˆ†å‰å™¨ (`^`)ï¼Œåˆ™å°† `timelines[j]` çš„å€¼å®Œæ•´åœ°ç´¯åŠ åˆ° `next[j - 1]` å’Œ `next[j + 1]`ã€‚
2.  å¦‚æœç¬¬ $j$ åˆ—å­˜åœ¨æ—¶é—´çº¿ä½†**æœª**é‡åˆ°åˆ†å‰å™¨ï¼Œåˆ™å°†å…¶å€¼ç›´æ¥ç´¯åŠ åˆ° `next[j]`ï¼ˆå³æ—¶é—´çº¿ç¬”ç›´å‘ä¸‹ï¼‰ã€‚
3.  éå†å®Œæˆåï¼Œç”¨ `next` æ•°ç»„æ›´æ–° `timelines`ï¼Œè¿›å…¥ä¸‹ä¸€è¡Œè®¡ç®—ã€‚

#### 3\. ä»£ç å®ç°ä¸æ€§èƒ½

æ­¤è¿­ä»£æ–¹æ³•ç»“åˆäº†è¾“å…¥æ•°æ®çš„**éš”è¡Œå‘¨æœŸæ€§**ï¼ˆåˆ©ç”¨ `grid.iter().step_by(2)` ä¼˜åŒ–ï¼‰ï¼Œå®ç°äº† $O(N \cdot M)$ çš„çº¿æ€§æ—¶é—´å¤æ‚åº¦ï¼Œå¹¶ä¸”é¿å…äº†é€’å½’çš„å¼€é”€ã€‚

#### æ ¸å¿ƒä»£ç å±•ç¤º (Rust):

```rust
fn part2(grid: &Grid) -> Result<usize> {
    let _start = Instant::now();

    // åˆå§‹çŠ¶æ€ï¼šç¬¬ä¸€è¡Œåªæœ‰'S'å¤„æœ‰ä¸€æ¡æ—¶é—´çº¿ï¼Œå…¶ä½™ä¸º0ã€‚
    let mut timelines: Vec<_> = grid[0].iter().map(|c| (c == &'S') as usize).collect();

    // æŒ‰è¡Œéå†ï¼Œåˆ©ç”¨ step_by(2) è·³è¿‡ä¸å« splitter çš„ç©ºè¡Œã€‚
    for row in grid.iter().step_by(2) {
        // next æ•°ç»„å­˜å‚¨ä¸‹ä¸€è¡Œçš„çŠ¶æ€ï¼Œåˆå§‹åŒ–ä¸º0
        let mut next = vec![0; timelines.len()];

        // éå†å½“å‰è¡Œçš„æ‰€æœ‰æ—¶é—´çº¿
        for (j, current_count) in timelines.iter().enumerate().filter(|(_, c)| c > &&0) {
            // current_count æ˜¯å½“å‰ j åˆ—ç´¯è®¡çš„æ—¶é—´çº¿æ€»æ•°
            if row[j] == '^' {
                // é‡åˆ°åˆ†å‰å™¨ï¼Œå°†è·¯å¾„æ•°åˆ†é…åˆ°å·¦å³ä¸¤åˆ—
                next[j - 1] += current_count;
                next[j + 1] += current_count;
            } else {
                // æ²¡æœ‰åˆ†å‰å™¨ï¼Œè·¯å¾„æ•°ç›´è¡Œå‘ä¸‹
                next[j] += current_count;
            }
        }
        // æ›´æ–°çŠ¶æ€ï¼Œè¿›è¡Œä¸‹ä¸€è½®è¿­ä»£
        timelines = next;
    }
    // æœ€ç»ˆç»“æœæ˜¯æœ€åä¸€å±‚æ‰€æœ‰åˆ—çš„æ—¶é—´çº¿æ€»æ•°ä¹‹å’Œ
    let count = timelines.iter().sum();

    println!("part 2: {count}");
    println!("> Time elapsed is: {:?}", _start.elapsed());
    Ok(count)
}
```

### 5. æ€»ç»“ä¸å±•æœ›

å°½ç®¡ä»Šå¤©çš„ç¨‹åºåœ¨ç†è®ºä¸Šä»æœ‰æè‡´ä¼˜åŒ–çš„ç©ºé—´â€”â€”ä¾‹å¦‚åœ¨**ç¬¬ä¸€éƒ¨åˆ†**å¼•å…¥**ä½æ©ç  (Bitmask)** ä»¥åˆ©ç”¨ CPU å¹¶è¡Œè®¡ç®—ï¼Œæˆ–è€…åœ¨**ç¬¬äºŒéƒ¨åˆ†**åˆ©ç”¨ **HashMap** (æˆ–ç¨€ç–ç´¢å¼•) æ¥è¿›ä¸€æ­¥å‹ç¼©ç¨€ç–çš„æ—¶é—´çº¿æ•°æ®â€”â€”ä½†æ•´ä½“è€Œè¨€ï¼Œç›®å‰çš„å®ç°å·²ç»åœ¨ä»£ç å¯è¯»æ€§ä¸è¿è¡Œæ•ˆç‡ä¹‹é—´å–å¾—äº†æä½³çš„å¹³è¡¡ã€‚

å€¼å¾—æ³¨æ„çš„æ˜¯ï¼Œå³ä¾¿æ˜¯æœ€åˆæ„æƒ³çš„ BFS å’Œ DFS æ–¹æ¡ˆï¼Œåœ¨å½“å‰çš„æ•°æ®è§„æ¨¡ä¸‹ä¹Ÿèƒ½ä¿æŒä¸é”™çš„å“åº”é€Ÿåº¦ï¼Œå¹¶æœªå‡ºç°ä¸¥é‡çš„æ€§èƒ½ç“¶é¢ˆã€‚æ€»ä½“æ¥çœ‹ï¼Œä»Šå¤©çš„é¢˜ç›®éš¾åº¦é€‚å®œï¼Œæ›´åƒæ˜¯ä¸€åœºå¸®åŠ©å¤§å®¶æ‰¾å›çŠ¶æ€çš„**ç®—æ³•çƒ­èº«**ã€‚

## Day 8

è¾“å…¥æ˜¯ä¸€ç³»åˆ—çš„ä¸‰ç»´åæ ‡ï¼Œéœ€è¦è¿›è¡Œä¸¤ä¸¤è¿æ¥ï¼Œè¿æ¥é¡ºåºè¦æ±‚æŒ‰ç…§åæ ‡çš„ç›´çº¿è·ç¦»å‡åºè¿›è¡Œè¿æ¥ã€‚ç»“æœç®€å•åˆ†æï¼Œä»Šå¤©çš„é—®é¢˜å¯ä»¥ä½¿ç”¨å¹¶æŸ¥é›†è¡¨ç¤ºè¾“å…¥ï¼Œè¿›è¡Œè§£å†³ã€‚

å› ä¸ºå¤ªä¹…æ²¡æœ‰å†™ç®—æ³•é¢˜ï¼Œæ‰€ä»¥æˆ‘é˜…è¯»äº† [ç»´åŸºç™¾ç§‘](https://zh.wikipedia.org/wiki/%E5%B9%B6%E6%9F%A5%E9%9B%86) åå‚è€ƒå®ç°äº†å¹¶æŸ¥é›†ã€‚

é¦–å…ˆå°†åæ ‡è¿›è¡Œä¸¤ä¸¤é…å¯¹ï¼Œå–å¾—æ‰€æœ‰è¾¹çš„ï¼Œæ ¹æ®è¾¹çš„é•¿åº¦ï¼ˆç›´çº¿è·ç¦»ï¼‰ï¼Œè¿›è¡Œæ’åºã€‚ä½¿ç”¨ä¸€ä¸ªæ•°ç»„ circuits ä»£è¡¨èŠ‚ç‚¹çš„è¿æ¥æƒ…å†µï¼Œcircuits[i] è¡¨ç¤ºä¸èŠ‚ç‚¹ i è¿æ¥çš„èŠ‚ç‚¹ã€‚

æŸ¥è¯¢ï¼šå…·ä½“çš„å®ç°ä¸­ circuits åˆå§‹éƒ½è¢«ç½®ä¸ºä¸å­˜åœ¨çš„èŠ‚ç‚¹ã€‚

```rust
fn find(circuits: &mut [usize], i: usize) -> usize {
    if circuits[i] == circuits.len() {
        circuits[i] = i;
        return i;
    }
    if circuits[i] != i {
        circuits[i] = find(circuits, circuits[i]);
    }
    circuits[i]
}
```

åˆå¹¶

```rust
fn union(circuits: &mut [usize], connection: (usize, usize)) {
    let (i, j) = connection;
    let i_root = find(circuits, i);
    let j_root = find(circuits, j);
    if i_root != j_root {
        circuits[i_root] = j_root;
    }
}
```
